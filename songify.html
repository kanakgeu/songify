<!DOCTYPE html>
<html>
<head>
	<title>MY music app</title>
	<link rel="stylesheet" type="text/css" href="font-awesome.css">
	<link rel="stylesheet" type="text/css" href="style1.css">
</head>
<body>
		<div class="wrapper">
	  		<section class="welcome-screen">
            	<h1> Welcome to Songify </h1>
            	<h3> Enter name to access your account </h3>
            	<div class="input-wrapper">
           		<input type="text" placeholder="Name" id="name-input">
           		<button> Go </button></div>
           		<p id="error">More than three char....</p>
            </section>
            <div class="main">
        <header> 
        	<div class="right floated user-name">  </div> 
        </header>
        <section class="content">
	<table id="songs">
	<thead>
		<tr>
			<td>Title</td>
			<td>Artist</td>
			<td>Album</td>
			<td>Duration</td>
		</tr>
	</thead>
	<tbody>
		<tr id='song1'>
			<td class="song-name"></td>
			<td class="song-artist"></td>
			<td class="song-album"></td>
			<td class="song-duration"></td>
		</tr>
		<tr id='song2'>
			<td class="song-name"></td>
			<td class="song-artist"></td>
			<td class="song-album"></td>
			<td class="song-duration"></td>
		</tr>
		<tr id='song3'>
			<td class="song-name"></td>
			<td class="song-artist"></td>
			<td class="song-album"></td>
			<td class="song-duration"></td>
		</tr>
		<tr id='song4'>
			<td class="song-name"></td>
			<td class="song-artist"></td>
			<td class="song-album"></td>
			<td class="song-duration"></td>
		</tr>
	</tbody>
</table>

        </section>
<footer>
<section id="hidden1">
	<div class="current-song-wrapper">
    	<img class="current-song-image" height="55" width="55">
    	<div>
        	<p class="current-song-name"></p>
        	<p class="current-song-album"></p>
    	</div>
	</div>
	<audio controls=""></audio>
</section>
</footer>
<section>

</section>
</div>
<script src="jquery-2.2.0.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
<script>

$('.welcome-screen button').on('click', function() {
    var name = $('#name-input').val();
    var message = "Welcome, " + name;
    $('.main .user-name').text(message);
    $('.welcome-screen').addClass('hidden');
    $('.main').removeClass('hidden');
});

var songs = [
	{
        'name': 'Make Some Noise For DesiBoys',
        'artist': 'K.K & Bob',
        'album': 'Desi Boyz(2011)',
        'duration': '04:04',
        'fileName': 'song1.mp3',
        'image': 'song1.jpg'
    },
    {
        'name': 'Dilliwaali Girlfriend',
        'artist': 'Arijit Singh & Sunidhi Chauhan',
        'album': 'Yeh jawaani Hai Deewani',
        'duration': '04:20',
        'fileName': 'song2.mp3',
        'image': 'song2.jpg'
    },
    {
        'name': 'Saturday Saturday',
        'artist': 'Sharib-Toshi, Badshah , Indeep Bakshi',
        'album': 'Humpty Sharma Ki Dulhania',
        'duration': '03:37',
        'fileName': 'song3.mp3',
        'image': 'song3.jpg'
    },
    {
        'name': 'High Heels',
        'artist': 'Honey Singh ',
        'album': 'KI & KA',
        'duration': '03:37',
        'fileName': 'song4.mp3',
        'image': 'song4.jpg'
    }
    ]



    // songs is an array of objects
  
	window.onload = function (){
		changeCurrentSongDetails(songs[0]);
	 	for(var i = 0; i < songs.length; i++) {
	        var obj = songs[i];
	        var name = '#song' + (i+1);
	        var song = $(name);
	        song.find('.song-name').text(obj.name);
	        song.find('.song-artist').text(obj.artist);
	        song.find('.song-album').text(obj.album);
	        song.find('.song-length').text(obj.duration);
	        addSongNameClickEvent(obj, i + 1);
    	}

    	$('#songs').DataTable({
    		paging: false,
    	});
	}
	function toggleSong() {
		var song = document.querySelector('audio'); 
		if(song.paused) {
			song.play();	
		} else {
			song.pause();
		}
	}
	function addSongNameClickEvent(songObj, id) {
		var songName = songObj.name;
		var fileName = songObj.fileName
		var id = '#song' + id;
		function onClick(event){
		
			var song = document.querySelector('audio');
			var currentSong = song.src;
			if (currentSong.search(fileName) != -1) {
				toggleSong();
			} else {
				changeCurrentSongDetails(songObj);
				song.src = fileName; 
				song.play();	
			}
		}
		
		$(id).on('click', onClick);
	}
	function changeCurrentSongDetails(songObj) {
		var songPath = 'img/' + songObj.image;
	    $('.current-song-image').attr('src', songPath)
	    $('.current-song-name').text(songObj.name)
	    $('.current-song-album').text(songObj.album)
	}



</body>
</html>